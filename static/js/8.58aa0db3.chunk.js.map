{"version":3,"sources":["utils/Firebase.js","utils/CurrentGeoposition/index.tsx","components/MapComponentMemo/index.tsx","components/MapComponentMemo/styles.module.scss","components/Header/styles.module.scss","components/Header/index.tsx","containers/Public/MainPage/index.tsx"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","OAuth","auth","db","firestore","languageCode","googleProvider","GoogleAuthProvider","facebookProvider","FacebookAuthProvider","signInWithGoogle","a","signInWithPopup","res","toast","success","theme","console","error","message","signInWithFacebook","signInWithEmailAndPassword","email","password","registerWithEmailAndPassword","name","createUserWithEmailAndPassword","user","collection","add","uid","authProvider","sendPasswordResetEmail","logout","signOut","writeUserPathDatabase","path","userId","database","ref","set","reedUserPathDatabase","postId","on","snapshot","data","val","sauntrStore","setUserPath","geoPositionReducer","state","action","type","positions","payload","Error","useGeoPosition","clearPosition","useReducer","dispatch","useEffect","navigator","geolocation","watchPosition","position","coords","clearWatch","containerStyle","width","height","Option","Select","MapComponentMemo","observer","button","click","currentPos","sounterStore","useStore","useState","currentPosition","setCurrentPosition","setMap","marker","setMarker","distanceLength","setDistanceLength","travelMode","setTravelMode","origin","setOrigin","destination","setDestination","waypoints","setWaypoints","response","setResponse","originMatrix","setOriginMatrix","destinationMatrix","setDestinationMatrix","responceMatrix","setResponseMatrix","lat","latitude","lng","longitude","item","markerArr","markersArr","isMarkers","length","changeWaipointsDistance","changeDistanceMatrix","setUserMarkers","totalRoadDistance","rows","elements","map","distance","value","findTotalDistance","setDistance","isLoaded","useJsApiLoader","id","googleMapsApiKey","onLoad","useCallback","bounds","window","google","maps","LatLngBounds","fitBounds","onUnmount","directionsServiceOptions","useMemo","optimizeWaypoints","location","stopover","shift","pop","directionsCallback","status","optionsMatrix","destinations","origins","avoidHighways","avoidTolls","distanceMatrixCallback","eachElementOK","forEach","el","className","styles","container","clearMap","onClick","icon","faMapMarkerAlt","color","size","btnIcon","select","showSearch","style","placeholder","optionFilterProp","onChange","mapContainerStyle","center","zoom","e","latLng","arr","label","draggable","options","callback","directions","React","memo","module","exports","Header","authAPI","history","useHistory","loginAuth","currentTarget","setAccessTokenAPI","credential","accessToken","setUserAPI","push","header","list","itemTitle","title","href","subtitle","text","loginBtn","faGoogle","faFacebookF","faEnvelope","faSignOutAlt","MainPage"],"mappings":"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","file":"static/js/8.58aa0db3.chunk.js","sourcesContent":["import firebase from 'firebase'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport sauntrStore from 'stores/saunter'\n\nlet configKorySergey = {\n  apiKey: process.env.REACT_APP_WEB_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  OAuth: process.env.REACT_APP_OAUTH,\n}\n// let configRealSoft = {\n//   apiKey: 'AIzaSyDwpUrScZfWnJtvC1bA3j1iF14-ZE-ff-U',\n//   authDomain: 'realsoftproject-5d44c.firebaseapp.com',\n//   databaseURL: 'https://realsoftproject-5d44c-default-rtdb.firebaseio.com/',\n//   projectId: 'realsoftproject-5d44c',\n//   OAuth: 'https://realsoftproject-5d44c.firebaseapp.com/__/auth/handler',\n// }\nconst app = firebase.initializeApp(configKorySergey)\nconst auth = app.auth()\nconst db = app.firestore()\nauth.languageCode = 'en'\nconst googleProvider = new firebase.auth.GoogleAuthProvider()\nconst facebookProvider = new firebase.auth.FacebookAuthProvider()\n\nconst signInWithGoogle = async () => {\n  try {\n    const res = await auth.signInWithPopup(googleProvider)\n    if (res) {\n      toast.success('You was successfully Login!', {\n        theme: 'colored',\n      })\n    }\n    return res\n  } catch (err) {\n    console.error(err)\n    toast.error(`${err.message}`, {\n      theme: 'colored',\n    })\n  }\n}\nconst signInWithFacebook = async () => {\n  try {\n    const res = await auth.signInWithPopup(facebookProvider)\n    return res\n  } catch (err) {\n    console.error(err)\n    toast.error(`${err.message}`, {\n      theme: 'colored',\n    })\n  }\n}\nconst signInWithEmailAndPassword = async (email, password) => {\n  try {\n    const res = await auth.signInWithEmailAndPassword(email, password)\n    if (res) {\n      toast.success('You was successfully Login!', {\n        theme: 'colored',\n      })\n    }\n    return res\n  } catch (err) {\n    console.error(err)\n    toast.error(`${err.message}`, {\n      theme: 'colored',\n    })\n  }\n}\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await auth.createUserWithEmailAndPassword(email, password)\n    if (res) {\n      toast.success('You was successfully registered. Login please!', {\n        theme: 'colored',\n      })\n    }\n    const user = res.user\n    await db.collection('users').add({\n      uid: user.uid,\n      name,\n      authProvider: 'local',\n      email,\n    })\n  } catch (err) {\n    console.error(err)\n    toast.error(`${err.message}`, {\n      theme: 'colored',\n    })\n  }\n}\nconst sendPasswordResetEmail = async email => {\n  try {\n    const res = await auth.sendPasswordResetEmail(email)\n    toast('Password reset link sent! Check your email!', {\n      theme: 'colored',\n    })\n  } catch (err) {\n    console.error(err)\n    toast.error(`${err.message}`, {\n      theme: 'colored',\n    })\n  }\n}\n\nconst logout = () => {\n  auth.signOut()\n  toast.success('signOut success!', {\n    theme: 'colored',\n  })\n}\n\nconst writeUserPathDatabase = (path, userId) => {\n  firebase\n    .database()\n    .ref('users/' + userId)\n    .set(path)\n  toast.success('Path added to database!', {\n    theme: 'colored',\n  })\n}\n\nconst reedUserPathDatabase = postId => {\n  const userPathRef = firebase.database().ref('users/' + postId)\n  userPathRef.on('value', snapshot => {\n    const data = snapshot.val()\n    if (data) {\n      sauntrStore.setUserPath(data)\n    }\n  })\n}\n\nconst remuveUserPathDatabase = (pathId, userId) => {\n  firebase\n    .database()\n    .ref('users/' + userId)\n    .remove(pathId)\n  toast.success('Path was remuved from database!', {\n    theme: 'colored',\n  })\n}\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  logout,\n  signInWithFacebook,\n  signInWithEmailAndPassword,\n  registerWithEmailAndPassword,\n  sendPasswordResetEmail,\n  writeUserPathDatabase,\n  reedUserPathDatabase,\n  remuveUserPathDatabase,\n}\n","import { useEffect, useReducer } from 'react'\n\nconst geoPositionReducer = (\n  state: any,\n  action: { type: string; payload: any }\n) => {\n  switch (action.type) {\n    case 'success':\n      return {\n        ...state,\n        positions: action.payload,\n      }\n    case 'error':\n      return {\n        ...state,\n        error: action.payload,\n      }\n    default:\n      throw new Error(`Action not Found!`)\n  }\n}\n\nconst useGeoPosition = () => {\n  let clearPosition: number\n  const [state, dispatch] = useReducer(geoPositionReducer, {\n    positions: null,\n    error: null,\n  })\n\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      dispatch({ type: 'error', payload: 'Browser not supported yet!' })\n    } else {\n      clearPosition = navigator.geolocation.watchPosition(\n        position => {\n          dispatch({\n            type: 'success',\n            payload: position.coords,\n          })\n        },\n        error =>\n          dispatch({\n            type: 'error',\n            payload: error,\n          })\n      )\n    }\n    return () => {\n      navigator.geolocation.clearWatch(clearPosition)\n    }\n  }, [])\n\n  return state\n}\n\nexport default useGeoPosition\n","import React, { useCallback, useState, useEffect, useMemo } from 'react'\nimport { useStore } from 'stores'\nimport { observer } from 'mobx-react'\nimport {\n  GoogleMap,\n  useJsApiLoader,\n  DirectionsService,\n  DirectionsRenderer,\n  DistanceMatrixService,\n  Marker,\n} from '@react-google-maps/api'\nimport useGeoPosition from 'utils/CurrentGeoposition/index'\nimport { Select } from 'antd'\nimport styles from './styles.module.scss'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faMapMarkerAlt } from '@fortawesome/free-solid-svg-icons'\n// import { toJS } from 'mobx'\nconst containerStyle = {\n  width: '100%',\n  height: '500px',\n}\ninterface IMap {\n  button?: boolean\n  click?: boolean\n  currentPos?: boolean\n}\nconst { Option } = Select\n\nconst MapComponentMemo: React.FC<IMap> = observer(\n  ({ button = false, click = false, currentPos = false }) => {\n    const { sounterStore } = useStore()\n    const { positions } = useGeoPosition()\n    const [currentPosition, setCurrentPosition] = useState<any>(null)\n    const [map, setMap] = useState(null)\n\n    const [marker, setMarker] = useState<any>()\n    const [distanceLength, setDistanceLength] = useState<number>(0)\n    const [travelMode, setTravelMode] = useState<any>('WALKING')\n    //Directions service\n    const [origin, setOrigin] = useState<any>(null)\n    const [destination, setDestination] = useState<any>(null)\n    const [waypoints, setWaypoints] = useState<any>([])\n    const [response, setResponse] = useState<any>(null)\n    // DistanceMatrix\n    const [originMatrix, setOriginMatrix] = useState<any>([])\n    const [destinationMatrix, setDestinationMatrix] = useState<any>([])\n    const [responceMatrix, setResponseMatrix] = useState<any>(null)\n\n    useEffect(() => {\n      positions &&\n        setCurrentPosition({\n          lat: positions?.latitude,\n          lng: positions?.longitude,\n        })\n    }, [positions])\n\n    useEffect(() => {\n      const isMarkers = () => {\n        if (sounterStore.item) {\n          const markerArr = sounterStore.item.markersArr\n          setMarker(markerArr)\n        }\n        if (click) {\n          setMarker([])\n        }\n      }\n      isMarkers()\n    }, [sounterStore.item, click])\n\n    useEffect(() => {\n      if (marker && marker.length > 1) {\n        changeWaipointsDistance(marker)\n        changeDistanceMatrix(marker)\n        sounterStore.setUserMarkers(marker)\n      }\n    }, [marker])\n\n    useEffect(() => {\n      const findTotalDistance = () => {\n        let totalRoadDistance = 0\n        if (responceMatrix !== null) {\n          responceMatrix?.rows[0]?.elements?.map(\n            (item: any) => (totalRoadDistance += item.distance?.value)\n          )\n          setDistanceLength(totalRoadDistance)\n        }\n      }\n      findTotalDistance()\n    }, [responceMatrix])\n\n    useEffect(() => {\n      if (distanceLength > 0) {\n        sounterStore.setDistance(distanceLength)\n      }\n    }, [distanceLength, sounterStore])\n\n    const clearMarkers = () => {\n      setMarker([])\n    }\n\n    //map code\n    const { isLoaded } = useJsApiLoader({\n      id: 'myprojectrealsoft',\n      googleMapsApiKey: 'AIzaSyARFt_e8aIQbS3evmvme0k4dInWVus72gw',\n    })\n\n    const onLoad = useCallback(function callback(map) {\n      const bounds = new window.google.maps.LatLngBounds()\n      map.fitBounds(bounds)\n      setMap(map)\n    }, [])\n\n    const onUnmount = useCallback(function callback(map) {\n      setMap(null)\n    }, [])\n\n    const onMapClick = (...args: any) => {\n      const e = args[0]\n      const lat: any = e.latLng.lat()\n      const lng: any = e.latLng.lng()\n      const arr = [...marker, { lat, lng }]\n      setMarker(arr)\n    }\n\n    //Directions service\n    const directionsServiceOptions = useMemo(() => {\n      return {\n        destination: destination,\n        origin: origin,\n        travelMode: travelMode,\n        waypoints: waypoints,\n        optimizeWaypoints: true,\n      }\n    }, [destination, origin, travelMode, waypoints])\n\n    const changeWaipointsDistance = (markerArr: any) => {\n      const waypoints = markerArr.map((marker: any) => ({\n        location: { lat: marker.lat, lng: marker.lng },\n        stopover: true,\n      }))\n      const origin = waypoints.shift().location\n      const destination = waypoints.pop().location\n      setOrigin(origin)\n      setDestination(destination)\n      setWaypoints(waypoints)\n    }\n\n    const directionsCallback = useCallback(\n      res => {\n        if (res !== null) {\n          if (res.status === 'OK') {\n            setResponse(res)\n          } else {\n          }\n        }\n      },\n      [destination, origin, waypoints, travelMode]\n    )\n\n    // DistanceMatrix\n    const optionsMatrix = useMemo(() => {\n      return {\n        destinations: [...destinationMatrix],\n        origins: [...originMatrix],\n        travelMode: travelMode,\n        avoidHighways: false,\n        avoidTolls: false,\n      }\n    }, [destinationMatrix, originMatrix, travelMode])\n\n    const changeDistanceMatrix = (markerArr: any) => {\n      const origins = [markerArr[0]]\n      const destinations = markerArr\n      setOriginMatrix(origins)\n      setDestinationMatrix(destinations)\n    }\n\n    const distanceMatrixCallback = useCallback(res => {\n      if (res !== null) {\n        let eachElementOK = false\n        res.rows[0].elements.forEach((el: any) => {\n          eachElementOK = el.status === 'OK'\n        })\n        if (eachElementOK) {\n          setResponseMatrix(res)\n        } else {\n        }\n      }\n    }, [])\n\n    function onChange(value: any) {\n      setTravelMode(value)\n    }\n\n    return (\n      <div className={styles.container}>\n        {button && (\n          <>\n            <button\n              type=\"button\"\n              className={styles.clearMap}\n              onClick={clearMarkers}\n            >\n              <FontAwesomeIcon\n                icon={faMapMarkerAlt}\n                color=\"grey\"\n                size=\"1x\"\n                className={styles.btnIcon}\n              />\n              Clear Map\n            </button>\n            <Select\n              className={styles.select}\n              showSearch\n              style={{ width: 200 }}\n              placeholder=\"Select trevel mode\"\n              optionFilterProp=\"children\"\n              onChange={onChange}\n            >\n              <Option value=\"DRIVING\">DRIVING</Option>\n              <Option value=\"WALKING\">WALKING</Option>\n              {/* <Option value=\"BICYCLING\">BICYCLING</Option> */}\n            </Select>\n          </>\n        )}\n        <div className={styles.containerStyle}>\n          {isLoaded ? (\n            <GoogleMap\n              mapContainerStyle={containerStyle}\n              center={currentPosition}\n              zoom={100}\n              onLoad={onLoad}\n              onUnmount={onUnmount}\n              onClick={click ? onMapClick : () => {}}\n            >\n              {currentPos && (\n                <Marker\n                  label=\"currentPosition\"\n                  position={currentPosition}\n                  draggable={false}\n                ></Marker>\n              )}\n              {destination && origin && (\n                <DirectionsService\n                  options={directionsServiceOptions}\n                  callback={directionsCallback}\n                />\n              )}\n              <DistanceMatrixService\n                options={optionsMatrix}\n                callback={distanceMatrixCallback}\n              />\n              {marker && marker.length > 1 ? (\n                <DirectionsRenderer\n                  options={{\n                    directions: { ...response },\n                    draggable: true,\n                  }}\n                />\n              ) : null}\n            </GoogleMap>\n          ) : null}\n        </div>\n      </div>\n    )\n  }\n)\nexport default React.memo(MapComponentMemo)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1MoTx\",\"clearMap\":\"styles_clearMap__2PSFD\",\"btnIcon\":\"styles_btnIcon__iPT5v\",\"select\":\"styles_select__3941f\",\"containerStyle\":\"styles_containerStyle__UvNfw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3l6K_\",\"list\":\"styles_list__3vlIU\",\"itemTitle\":\"styles_itemTitle__2yVH5\",\"title\":\"styles_title__1_FiU\",\"subtitle\":\"styles_subtitle__Z_Jd5\",\"item\":\"styles_item__2qQPO\",\"text\":\"styles_text__D6r9-\",\"loginBtn\":\"styles_loginBtn__eB7WL\"};","import React from 'react'\nimport { useStore } from 'stores'\nimport { observer } from 'mobx-react'\nimport { useHistory } from 'react-router'\nimport { signInWithGoogle, signInWithFacebook, logout } from 'utils/Firebase'\nimport styles from './styles.module.scss'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSignOutAlt, faEnvelope } from '@fortawesome/free-solid-svg-icons'\nimport { faGoogle, faFacebookF } from '@fortawesome/free-brands-svg-icons'\nimport { toJS } from 'mobx'\n\nconst Header = observer(() => {\n  const { authAPI } = useStore()\n  const history = useHistory()\n\n  const loginAuth = async (e: any) => {\n    if (e.currentTarget.name === 'google') {\n      const res: any = await signInWithGoogle()\n      if (res) {\n        authAPI.setAccessTokenAPI(res.credential.accessToken)\n        authAPI.setUserAPI(res.user)\n        history.push('/sounter')\n      }\n    }\n    if (e.currentTarget.name === 'facebook') {\n      const res: any = await signInWithFacebook()\n      if (res) {\n        authAPI.setAccessTokenAPI(res)\n        history.push('/sounter')\n      }\n    }\n  }\n\n  const logoutAuth = () => {\n    logout()\n    authAPI.setAccessTokenAPI(null)\n  }\n\n  return (\n    <>\n      <header className={styles.header}>\n        <div className={styles.container}>\n          <ul className={styles.list}>\n            <li className={styles.itemTitle}>\n              <a className={styles.title} href=\"/sounter\">\n                Sounter <p className={styles.subtitle}> create own routes</p>\n              </a>\n            </li>\n            {!authAPI.accessToken ? (\n              <>\n                <li className={styles.item}>\n                  <p className={styles.text}>Login with:</p>\n                  <button\n                    className={styles.loginBtn}\n                    type=\"button\"\n                    name=\"google\"\n                    onClick={e => loginAuth(e)}\n                  >\n                    <FontAwesomeIcon icon={faGoogle} color=\"white\" size=\"2x\" />\n                  </button>\n                </li>\n                <li className={styles.item}>\n                  <p className={styles.text}></p>\n                  <button\n                    className={styles.loginBtn}\n                    type=\"button\"\n                    name=\"facebook\"\n                    onClick={e => loginAuth(e)}\n                  >\n                    <FontAwesomeIcon\n                      icon={faFacebookF}\n                      color=\"white\"\n                      size=\"2x\"\n                    />\n                  </button>\n                </li>\n                <li className={styles.item}>\n                  <p className={styles.text}></p>\n                  <button\n                    className={styles.loginBtn}\n                    type=\"button\"\n                    name=\"email\"\n                    onClick={() => {\n                      history.push('/registration')\n                    }}\n                  >\n                    <FontAwesomeIcon\n                      icon={faEnvelope}\n                      color=\"white\"\n                      size=\"2x\"\n                    />\n                  </button>\n                </li>\n              </>\n            ) : null}\n            {authAPI.accessToken ? (\n              <li className={styles.item}>\n                <p className={styles.text}>Logout</p>\n                <button\n                  className={styles.loginBtn}\n                  type=\"button\"\n                  name=\"facebook\"\n                  onClick={logoutAuth}\n                >\n                  <FontAwesomeIcon\n                    icon={faSignOutAlt}\n                    color=\"white\"\n                    size=\"2x\"\n                  />\n                </button>\n              </li>\n            ) : null}\n          </ul>\n        </div>\n      </header>\n    </>\n  )\n})\n\nexport default Header\n","import React from 'react'\nimport Header from 'components/Header'\nimport MapComponentMemo from 'components/MapComponentMemo'\n\nconst MainPage = () => {\n  return (\n    <>\n      <Header />\n      <MapComponentMemo currentPos={true} />\n    </>\n  )\n}\n\nexport default MainPage\n"],"sourceRoot":""}